version: 3

includes:
  local:
    taskfile: .tasks/local.yaml

env:
  AXELOR_REPO: axelor/axelor-open-suite
  PMOSCODE_DOCKER: pmoscode/axelor-open-suite

tasks:
  get-artifact:
    desc: Downloads the lastest Tomcat .war release of Axelor Open Suite
    silent: true
    cmds:
      - ./scripts/get-war-file.sh {{.CLI_ARGS}}

  get-missing-artifacts:
    desc: Builds the missing artifact versions.
    cmds:
      - ./scripts/get-missing-releases.sh

  build:
    desc: Builds the docker image for latest Axelor release version
    cmds:
      - docker buildx build -t axelor-os:{{ .VERSION }} .
